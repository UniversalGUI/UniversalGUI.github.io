var gulp=require("gulp"),jshint=require("gulp-jshint"),sass=require("gulp-sass"),concat=require("gulp-concat"),uglify=require("gulp-uglify"),rename=require("gulp-rename"),htmlmin=require("gulp-htmlmin"),minifyCss=require("gulp-minify-css");gulp.task("lint",function(){return gulp.src("*.js").pipe(jshint()).pipe(jshint.reporter("default"))}),gulp.task("sass",function(){return gulp.src("*.scss").pipe(sass()).pipe(gulp.dest("minified"))}),gulp.task("scripts",function(){return gulp.src("*.js").pipe(concat("all.js")).pipe(gulp.dest("minified")).pipe(rename("all.min.js")).pipe(uglify()).pipe(gulp.dest("minified"))}),gulp.task("minify-css",function(){return gulp.src("*.css").pipe(minifyCss({compatibility:"ie8"})).pipe(rename({suffix:".min"})).pipe(gulp.dest("minified"))}),gulp.task("minify",function(){return gulp.src("*.html").pipe(htmlmin({collapseWhitespace:!0})).pipe(rename({suffix:".min"})).pipe(gulp.dest("minified"))}),gulp.task("watch",function(){gulp.watch("*.js",["lint","scripts"]),gulp.watch("*.scss",["sass"]),gulp.watch("*.html".minify),gulp.watch("*.css"["minify-css"])}),gulp.task("default",["lint","sass","scripts","minify","minify-css","watch"]);var http=require("http"),url=require("url"),path=require("path"),fs=require("fs"),port=process.argv[2]||8e3,WHT="[39m",RED="[91m",GRN="[32m";http.createServer(function(i,e){var t=url.parse(i.url).pathname,s=path.join(process.cwd(),t),p={".html":"text/html",".css":"text/css",".js":"text/javascript"};fs.exists(s,function(i){i?fs.statSync(s).isDirectory()&&(console.log(GRN+"FLDR: "+WHT+s),s+="/index.html"):(console.log(RED+"FAIL: "+s),s=path.join(process.cwd(),"/404.html")),fs.readFile(s,"binary",function(i,t){if(console.log(GRN+"FILE: "+WHT+s),i)return e.writeHead(500,{"Content-Type":"text/plain"}),e.write(i+"\n"),void e.end();var n={},r=p[path.extname(s)];r&&(n["Content-Type"]=r),e.writeHead(200,n),e.write(t,"binary"),e.end()})})}).listen(parseInt(port,10)),console.log(WHT+"Static file server running at\n  => http://localhost:"+port+"/\nCTRL + C to shutdown");